> 연관관계 매핑은 무엇이고 어떻게 이용할 수 있을까?
> - 연관관계 매핑은 왜 이용할까?
> - 연관관계 매핑에는 무엇이 있을까?
> - 영속성 전이는 무엇이고 어떻게 활용할 수 있을까?

## 연관관계 매핑
객체 간 관계(참조)를 데이터베이스의 외래 키 관계로 매핑하는 것을 말한다. 
ex. 객체에서는 order가 member의 데이터를 참조한다면 DB에서는 이를 FK로 구현할 수 있다.

### 이용하는 이유
관계 데이터베이스에서 관계가 있는 테이블에서 연관 정보들을 불러올 때 JOIN을 사용하는데, 연관관계 매핑을 통해 JOIN을 객체 그래프로 탐색할 수 있다.

```Java
order.getMember().getAddress().getCity();
```
### 연관관계 매핑 종류
DB파트에서 다뤘던 관계 종류를 어노테이션을 통해 구현할 수 있다.

- 1:N : `@ManyToOne`
- N:1 : `@OneToMany`
- 1:1 : `@OneToOne`
- N:M : `@ManyToMany`

실무에서는 대부분 ManyToOne + OneToMany 조합으로 다대다 단계를 구현한다. 

> 연관관계를 구현할 때에는 양방향보다는 단방향으로 구현하는 것을 권장, 양방향  사용시 반드시 연관관계의 주인을 설정해야한다.(외래키 가진쪽이 주인)

## 영속성 전이
부모 엔티티의 영속성 상태 변화가 자식에게도 전파되는 기능이다. 

연관관계 매핑 상태에서 영속성 전이를 통해 도메인 객체의 생명 주기를 하나로 묶어 관리할 수 있다.

- `CascadeType.PERSIST` : 부모 저장 시 자식도 저장
- `CascadeType.REMOVE` : 부모 삭제 시 자식도 삭제
- `CascadeType.ALL` : 모든 상태 전이 적용
